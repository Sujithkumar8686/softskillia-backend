<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Soft Skilia â€“ Register</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;700;900&display=swap"
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body class="bg-gray-50 min-h-screen flex flex-col" style="font-family: 'Work Sans', sans-serif;">
    <header class="flex items-center justify-between border-b px-10 py-3 bg-white">
      <div class="flex items-center gap-4 text-[#111417]">
        <div class="size-4"></div>
        <h2 class="text-lg font-bold tracking-tight">Soft Skilia</h2>
      </div>
      <nav class="flex items-center gap-9">
        <a class="text-sm font-medium" href="home.html">Home</a>
        <a class="text-sm font-medium" href="courses.html">Courses</a>
        <a class="text-sm font-medium" href="pricing.html">Pricing</a>
        <a class="text-sm font-medium" href="contact.html">Contact</a>
        <a
          href="login.html"
          class="flex items-center justify-center h-10 px-4 rounded-full bg-[#dbe5ef] text-sm font-bold text-[#111417]"
        >
          Log in
        </a>
      </nav>
    </header>

    <main class="flex flex-1 items-center justify-center px-4 py-10">
      <div class="w-full max-w-md bg-white p-6 rounded-xl shadow">
        <h2 class="text-center text-2xl font-bold text-[#111417] mb-6">Create your account</h2>

        <!-- Full Name -->
        <div class="mb-4">
          <label class="block font-medium mb-1" for="fullName">Full Name</label>
          <input
            id="fullName"
            type="text"
            placeholder="Enter your full name"
            class="w-full h-12 px-4 rounded-xl border border-[#d6dbe1] bg-gray-50"
          />
          <span id="fullNameError" class="text-red-500 text-sm hidden">Please enter your full name.</span>
        </div>

        <!-- Email -->
        <div class="mb-4">
          <label class="block font-medium mb-1" for="email">Email</label>
          <input
            id="email"
            type="email"
            placeholder="Enter your email"
            class="w-full h-12 px-4 rounded-xl border border-[#d6dbe1] bg-gray-50"
          />
          <span id="emailError" class="text-red-500 text-sm hidden">Please enter a valid email address.</span>
        </div>

        <!-- Username -->
        <div class="mb-4">
          <label class="block font-medium mb-1" for="username">Username</label>
          <input
            id="username"
            type="text"
            placeholder="Choose a username"
            class="w-full h-12 px-4 rounded-xl border border-[#d6dbe1] bg-gray-50"
          />
          <span id="usernameError" class="text-red-500 text-sm hidden">Username must be at least 4 characters.</span>
        </div>

        <!-- Password -->
        <div class="mb-6">
          <label class="block font-medium mb-1" for="password">Password</label>
          <input
            id="password"
            type="password"
            placeholder="Create a password"
            class="w-full h-12 px-4 rounded-xl border border-[#d6dbe1] bg-gray-50"
          />
          <span id="passwordError" class="text-red-500 text-sm hidden">Password must be at least 6 characters.</span>
        </div>

        <!-- Register Button -->
        <div class="mb-4">
          <button onclick="registerUser()">Register</button>
        </div>

        <p class="text-center text-sm text-[#627384]">
          Already have an account?
          <a href="login.html" class="text-[#111417] underline hover:text-blue-600 font-medium">Log in</a>
        </p>
      </div>
    </main>

    <script>
      async function submitRegistrationData(data) {
        console.log("Submitting data to backend:", data);
        return new Promise((resolve) =>
          setTimeout(() => resolve({ success: true }), 1500)
        );
      }

      async function validateRegistration() {
        const fullName = document.getElementById("fullName").value.trim();
        const email = document.getElementById("email").value.trim();
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();

        let valid = true;

        // Reset error messages
        document.getElementById("fullNameError").classList.add("hidden");
        document.getElementById("emailError").classList.add("hidden");
        document.getElementById("usernameError").classList.add("hidden");
        document.getElementById("passwordError").classList.add("hidden");

        if (fullName.length === 0) {
          document.getElementById("fullNameError").classList.remove("hidden");
          valid = false;
        }

        const emailRegex = /^[\w.-]+@([\w-]+\.)+[\w-]{2,4}$/;
        if (!emailRegex.test(email)) {
          document.getElementById("emailError").classList.remove("hidden");
          valid = false;
        }

        if (username.length < 4) {
          document.getElementById("usernameError").classList.remove("hidden");
          valid = false;
        }

        if (password.length < 6) {
          document.getElementById("passwordError").classList.remove("hidden");
          valid = false;
        }

        if (!valid) return;

        try {
          const response = await submitRegistrationData({ fullName, email, username, password });
          if (response.success) {
            alert("Registration successful! You can now log in.");
            window.location.href = "login.html";
          } else {
            alert("Registration failed. Please try again.");
          }
        } catch (err) {
          console.error("Error submitting registration:", err);
          alert("Something went wrong. Try again later.");
        }
      }
    </script>
    <script>
      async function registerUser() {
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value;

        const res = await fetch("/api/register", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ username, password })
        });

        const data = await res.json();
        if (data.success) {
          alert("Registration successful! Redirecting to login.");
          window.location.href = "login.html";
        } else {
          alert(data.message || "Registration failed.");
        }
      }
    </script>
  </body>
</html>
